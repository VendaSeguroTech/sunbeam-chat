# ============================================================================
# SSO Server Configuration (Token Exchange Architecture)
# ============================================================================

# Server Port
PORT=3002

# Hub Configuration
HUB_EXCHANGE_URL=https://hub.vendaseguro.com.br/wp-json/isw-sso/v1/exchange

# JWT Validation (Chave pública do Hub para validar JWT RS256)
# Opção 1: Path para arquivo PEM
HUB_JWT_PUBLIC_KEY_PATH=./keys/isw-sso-public.pem

# Opção 2: Conteúdo da chave pública diretamente (para ambientes sem filesystem)
# HUB_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"

# App Configuration
APP_BASE_URL=http://localhost:8080
APP_JWT_SECRET=your-super-secret-key-change-in-production-min-32-chars

# Supabase Configuration (para criar/buscar usuários)
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_SERVICE_KEY=sua_service_role_key_aqui

# Environment
NODE_ENV=development  # ou 'production' (habilita Secure flag nos cookies)

# ============================================================================
# NOTAS DE SEGURANÇA
# ============================================================================
#
# 1. HUB_JWT_PUBLIC_KEY_PATH ou HUB_JWT_PUBLIC_KEY:
#    - Conter a chave pública RSA do Hub (gerada com generate-rsa-keys.sh)
#    - Usada para validar assinatura do JWT retornado pelo Hub
#    - PODE ser compartilhada (é pública)
#
# 2. APP_JWT_SECRET:
#    - Usado para assinar o cookie de sessão da IA (JWT próprio)
#    - Mínimo 32 caracteres
#    - NUNCA compartilhar ou commitar
#    - Gerar com: openssl rand -base64 32
#
# 3. SUPABASE_SERVICE_KEY:
#    - Service role key (NÃO anon key)
#    - Permissões admin para criar usuários
#    - NUNCA expor no frontend
#
# 4. NODE_ENV:
#    - 'development': Cookie sem Secure flag (funciona em HTTP)
#    - 'production': Cookie com Secure flag (requer HTTPS)
#
# ============================================================================
